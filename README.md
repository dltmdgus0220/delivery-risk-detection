# 🛵 배달앱 리뷰 분석을 통한 이탈 리스크 감지 시스템
## “배달의민족” 고객 이탈 방지를 위한 리뷰 분석 프로젝트

## 1. 프로젝트 개요

본 프로젝트는 배달앱 리뷰 데이터 분석을 통해 고객의 이탈 위험 요인을 분석하고, 사전 예측하여 대비하기 위한 **이탈 리스크 감지 시스템**입니다.

관리자가 이탈 리스크를 빠르게 인지하고, 문제 원인에 따른 즉각적인 대응이 가능하도록 지원하는 것을 목표로 합니다.



## 2. 주요 기능
### 2.1. 이탈 의도 분류 자동화 (Churn Intent Classification)
* 리뷰 텍스트를 기반으로 고객의 이탈 의도를 자동 분류
* 사전 정의한 3가지 클래스 체계 적용
    * 확정: 명시적인 이탈, 해지, 삭제, 타서비스 권유 및 전환 표현
    * 불만: 불편, 불만, 비판, 개선 요구 중 하나라도 포함된 경우
    * 없음: 순수 긍정 및 만족 표현만 있는 경우
* LLM 기반 라벨링 및 학습 모델을 활용하여 대량 리뷰 자동 처리
* 신규 리뷰 유입 시 자동 분류 가능
  
👉 관리자는 이탈 가능성이 높은 리뷰를 즉시 파악 가능

### 2.2. 이탈 지수(KPI) 설계

* 가중치 + Smoothing(K값) 기반 리스크 지표 설계
* 클래스별 가중치 부여
    * 확정, 불만, 없음 각 클래스에 차등 가중치 적용
    * 소비자 거래지수와의 상관관계 분석을 기반으로 가중치 도출
* 리뷰 수가 적은 경우 과도한 변동을 방지하기 위한 K값 기반 스무딩(Smoothing) 적용

👉 단기 노이즈에 흔들리지 않는 안정적인 위험도 지표 제공

### 2.3. 키워드 기반 원인 분석

* 이탈/불만 리뷰에서 핵심 키워드를 자동 추출하여 문제의 구체적 원인 카테고리화
* LLM 기반 키워드 도출
* ASPECT, STATUS, SERVICE 사전을 정의하여 "대상-상태", "고유서비스-상태" 형태로 키워드 도출

👉 이탈 원인을 키워드 단위로 도출하여 설명 가능한 분석 제공

### 2.4. 타겟 키워드 기반 리뷰 요약 제공

* 가장 많이 등장한 키워드를 **타겟 키워드(Target Keyword)**로 정의
* 해당 키워드를 포함한 리뷰만 필터링
* LLM을 활용하여 핵심 불만 요약 생성
    * 문제상황: 고객이 겪은 구체적인 불편함
    * 기존 대응 평가: 문제 발생 시 기존 대응 방식에 대한 고객의 부정적/긍정적 평가
    * 원하는 대응 방향: 소비자가 기대하는 이상적인 해결책 및 개선 요구 사항

👉 관리자는 여러개 리뷰를 직접 읽지 않아도 핵심 이슈를 한눈에 파악 가능

## 3. 기술 스택
### 3.1. Language
* python
  
### 3.2. Database
* SQLite

### 3.3. Data Processing & Analysis
* Pandas
* NumPy

### 3.4. Visualization & Dashboard
* Streamlit
* Matplotlib

### 3.5. AI / LLM
* Gemini API


## 4. 데이터
### 4.1. 데이터 출처
* Google Play Store 내 「배달의민족」 앱 리뷰 데이터
* Python 라이브러리 google-play-scraper를 활용하여 수집

### 4.2. 수집 개요
* 총 리뷰 수: 100,000건
* 수집 기간: 2015.10.30 ~ 2026.01.05
* 수집 항목:
   * reviewId - 리뷰 고유 식별자(고유키)
   * userName - 리뷰 작성자 닉네임
   * content - 리뷰 텍스트
   * score - 별점(1~5점)
   * thumbsUpCount - 공감(좋아요) 수, 리뷰 요약 및 중요도 산정 시 우선 순위 가중치로 용
   * at - 리뷰 작성 일자(yyyy-mm-dd hh:mm:ss)


## 5. 설치 및 실행
### 5.1. 환경 설정

1.  **Python 설치:** Python 3.8 이상 버전이 설치되어 있어야 합니다.
2.  **가상 환경 생성 및 활성화 (권장):**
    해당 프로젝트는 conda 가상환경을 사용했습니다.
    ### Windows
    ```bash
    conda create -n env01 python=3.10
    conda activate env01
    ```

3.  **의존성 설치:** `requirements.txt`에 명시된 라이브러리를 설치합니다.
    ```bash
    pip install -r requirements.txt
    ```

### 5.2. 실행
root 디렉토리에서 실행
```bash
streamlit run app.py
```


## 6. 프로젝트 구조

```
.
├── .gitignore
├── README.md                  
├── requirements.txt # Python 의존성 목록
├── data/ # 원시/결과 데이터 저장 경로
├── model_out/ # 학습된 모델 가중치 저장 경로
└── src/
    ├── app.py # 대시보드
    ├── data_collect.py # 데이터수집
    ├── classification/
    |   ├── classifier.py # 이탈의도분류
    |   ├── configs.py
    |   ├── datasets.py
    |   ├── trainer.py
    |   └── utils.py
    ├── dashboard/
    |   ├── pipeline.py 
    |   ├── util.py
    |   └── page/
    |       ├── home.py
    |       └── analysis.py   
    ├── keyword/
    |   ├── llm_keyword_async.py # 비동기식 키워드도출
    |   ├── llm_keyword.py # 동기식 키워드도출
    |   └── 기타파일들
    ├── labeling/
    |   ├── llm_churn_intent_labeling_async.py # 비동기식 이탈의도라벨링
    |   ├── llm_churn_intent_labeling.py # 동기식 이탈의도라벨링
    |   └── eval_labeling.py
    └── risk_summary/
        ├── llm_summary_reviews.py
        └── risk_score_calc.py


```

## 7. 평가
### 7.1. 좋았던 점
* 이탈의 구조적 원인 규명
   * 단순 빈도 분석을 넘어 타겟 키워드 정의 → 동시발생 키워드 분석 → 리뷰 요약 분석으로 확장
   * “배달 지연” 자체보다, 지연 이후의 대응 경험이 이탈을 결정한다는 인사이트 도출

* 정량 KPI 기반 관리 체계 구축
   * 이탈 지수를 단순 비율이 아닌 가중치 + Smoothing(K값) 기반으로 설계
   * 전략 실행 전후 비교가 가능한 정량 지표 체계 마련
   * 단기 노이즈에 흔들리지 않는 안정적 위험도 측정 가능

* End-to-End 분석 자동화 설계
   * 데이터 수집 → 이탈 의도 분류 → 키워드 추출 → 리뷰 요약까지 연결
   * 반복 실행 가능한 실무 적용 기반 확보
   * LLM을 실제 분석 파이프라인에 통합하여 자동화 구현

* 데이터 기반 전략 구체화
   * 도출된 인사이트를 단순 분석 결과에 그치지 않고 CS 개선 및 고객 경험 혁신 전략과 연결

### 7.2. 보완할 점
* 실제 이탈 여부 검증 한계
   * 리뷰 데이터만으로는 사용자의 실제 앱 삭제 여부 또는 휴면 전환 여부 확인 불가
   * 실제 이탈 행동 데이터와의 매칭을 통한 KPI 정합성 검증 필요

* LLM 기반 분석 의존 리스크
   * Hallucination 가능성 및 프롬프트 민감도로 인해 결과 해석의 일관성 저하 위험 존재
   * Human-in-the-Loop 검증 프로세스 도입 필요

* 기업 내부 운영 맥락 미반영
   * 배차 로직, 수요-공급 지표 등 내부 운영 데이터에 접근하지 못해 구조적 인과 분석에는 한계 존재
   * 이에 따라 제안 전략이 소비자 경험 개선 중심으로 한정됨
   * 향후 내부 운영 데이터 결합 시, 발생 원인을 줄이는 운영 최적화 전략으로 확장 가능
 
  
## 기타. 일정관리
https://www.notion.so/2d8864f0902080f79836f0036fddc088

